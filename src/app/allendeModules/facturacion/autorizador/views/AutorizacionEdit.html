<sa-title title-name="vm.title.name" title-icon="{{vm.title.icon}}"></sa-title>
<sa-loading ng-if="vm.formControl.loading"></sa-loading>
<div class="cuerpo" ng-hide="vm.formControl.loading">
	<form name="formAutorizacionEdit" accept-charset="utf-8" novalidate>
		<div class="row">
			<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group">
				<label class="label-control">Tipo Mensaje</label>
				<select class="form-control" id="cmb_tipoMensajeAutorizador" ng-model="vm.data.tipoMensaje" ng-options="tipoMensaje.Nombre for tipoMensaje in vm.data.tiposMensajes track by tipoMensaje.Id" ng-change="vm.formControl.changeTipoMensaje()" ng-disabled="vm.filter.modificacion" autofocus sa-enter></select>
			</div>
			<div class="col-xs-12 col-sm-6 col-md-2 col-lg-2 form-group">
				<label class="label-control">Mutual</label>
				<input type="number" placeholder="Código" class="form-control" id="codigoMutual" name="codigoMutual" ng-maxlength="10" ng-keypress="vm.formControl.buscarMutualEnter($event)" ng-blur="vm.formControl.buscarMutual()" ng-model="vm.filter.codigoMutual" sa-enter >
			</div>
			<div class="col-xs-12 col-sm-6 col-md-5 col-lg-4 form-group">
				<label class="label-control">Nombre Mutual</label>
				<div class="input-group">
					<input type="text" placeholder="MUTUAL" class="form-control text-uppercase" id="nombreMutual" name="nombreMutual" ng-maxlength="200" ng-readonly="true" ng-model="vm.filter.nombreMutual" sa-enter >
					<span class="input-group-btn">
						<button class="btn btn-default btn-loading" uib-tooltip="Buscar Mutual" tooltip-placement="top" ng-click="vm.formControl.buscarMutuales()" sa-punto-click="vm.formControl.buscarMutuales()" sa-enter >
							<sa-icon name="SEARCH"></sa-icon>
						</button>
					</span>
				</div>
			</div>
			<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group">
				<label class="label-control">Sucursal</label>
				<select class="form-control" id="cmb_sucursal" ng-model="vm.data.sucursal" ng-options="sucursal.Nombre for sucursal in vm.data.sucursales track by sucursal.Id" ng-disabled="vm.filter.modificacion" sa-enter></select>
			</div>
			<div class="col-xs-12 col-sm-7 col-md-7 col-lg-2 form-group">
				<label class="label-control">Servicio</label>
				<select class="form-control" id="cmb_servicio" ng-model="vm.data.servicio" ng-options="servicio.Nombre for servicio in vm.data.servicios track by servicio.Id" ng-disabled="vm.filter.modificacion" sa-enter>
					<option value="">SIN DEFINIR</option>
				</select>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 col-sm-8 col-md-6 col-lg-8 form-group">
				<!-- <sa-selector-paciente ng-model="vm.filter.idPaciente" ng-disabled="vm.filter.modificacion"></sa-selector-paciente> -->
				<div class="row">
					<div class="col-xs-6 col-sm-3 col-md-3 col-lg-2 form-group">
						<label for="tipo_documento" >Tipo Documento</label>
						<select class="form-control" 
								id="tipo_documento"
								ng-model="vm.filter.tipoDocumentoPaciente" 
								ng-disabled="true" 
								ng-options="tipo.Nombre for tipo in vm.data.tiposDocumentos track by tipo.Id" 
								sa-enter>
							<option value="">TODOS</option>
						</select>
					</div>
					<div class="col-xs-6 col-sm-4 col-md-3 col-lg-4 form-group">
						<label for="numero_documento" >Número Documento</label>
						<input type="text"
								id="numero_documento" 
								placeholder="0" 
								class="form-control" 
								ng-maxlength="12" 
								ng-model="vm.filter.numeroDocumentoPaciente" 
								ng-disabled="true" 
								sa-enter>
					</div>
					<div class="col-xs-12 col-sm-5 col-md-6 col-lg-6 form-group">
						<label for="nombre_paciente" >Nombre Paciente</label>
						<div class="input-group">
							<input id="nombre_paciente" 
									type="text" 
									placeholder="PACIENTE" 
									class="form-control text-uppercase" 
									ng-readonly="true" 
									ng-model="vm.filter.nombrePaciente" 
									sa-enter/>
							<span class="input-group-btn">
								<button class="btn btn-default btn-loading" 
										id="buscador-paciente-buscar-btn"
										ng-disabled="true" 
										>
									<sa-icon name="SEARCH"></sa-icon>
								</button>
							</span>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2 form-group">
				<label class="label-control">Tipo Documento</label>
				<select class="form-control" id="cmb_tipoDoc" ng-model="vm.data.tipoDocumento" ng-options="tipo.Nombre for tipo in vm.data.tiposDocumentos track by tipo.Id" sa-enter></select>
			</div>
			<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group">
				<label class="label-control ">Número Afiliado</label>
				<input type="text" class="form-control" id="numeroAfiliado" name="numeroAfiliado" ng-model="vm.data.numeroAfiliado" sa-enter>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 col-sm-6 col-md-2 col-lg-2 form-group">
				<label class="label-control">Profesional Efector</label>
				<input type="text" placeholder="MATRICULA" class="form-control" sa-integer id="matricula" name="matricula" ng-maxlength="10" ng-keypress="vm.formControl.buscarProfesionalEnter($event)" ng-blur="vm.formControl.buscarProfesional()" ng-model="vm.filter.matriculaProfesional" sa-enter >
			</div>
			<div class="col-xs-12 col-sm-6 col-md-5 col-lg-3 form-group">
				<label class="label-control">Nombre Profesional</label>
				<div class="input-group">
					<input type="text" placeholder="PROFESIONAL" class="form-control text-uppercase" id="nombreProfesional" name="nombreProfesional" ng-maxlength="200" ng-readonly="true" ng-model="vm.filter.nombreProfesional" sa-enter >
					<span class="input-group-btn">
						<button class="btn btn-default btn-loading" uib-tooltip="Buscar Profesional" tooltip-placement="top" ng-click="vm.formControl.buscarProfesionales()" sa-punto-click="vm.formControl.buscarProfesionales()" sa-enter>
							<sa-icon name="SEARCH"></sa-icon>
						</button>
					</span>
				</div>
			</div>
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-1 form-group">
				<label class="label-control">Mat. Solicitante</label>
				<input type="text" placeholder="MATRICULA" class="form-control" sa-integer id="matricula" name="matricula" ng-maxlength="10" ng-model="vm.filter.matriculaSolicitante" sa-enter >
			</div>
			<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group">
				<label class="label-control ">Número Transacción</label>
				<input type="text" class="form-control" id="nrotransaccion" name="nrotransaccion" ng-model="vm.data.nrotransaccion" sa-enter></imput>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 col-sm-6 col-md-2 col-lg-2 form-group">
				<label class="label-control">CIE 10</label>
				<input type="text" placeholder="Código" class="form-control text-uppercase" id="codigoCIE10" name="codigoCIE10" ng-maxlength="4" ng-keypress="vm.formControl.buscarCIE10Enter($event)" ng-blur="vm.formControl.buscarCIE10()" ng-model="vm.filter.codigoCIE10" sa-enter >
			</div>
			<div class="col-xs-12 col-sm-6 col-md-5 col-lg-5 form-group">
				<label class="label-control">Descripción CIE 10</label>
				<div class="input-group">
					<input type="text" placeholder="Descripción" class="form-control text-uppercase" id="nombreCIE10" name="nombreCIE10" ng-maxlength="200" ng-readonly="true" ng-model="vm.filter.nombreCIE10" sa-enter >
					<span class="input-group-btn">
						<button class="btn btn-default btn-loading" uib-tooltip="Buscar CIE 10" tooltip-placement="top" ng-click="vm.formControl.buscarCIE10s()" sa-punto-click="vm.formControl.buscarCIE10s()" sa-enter>
							<sa-icon name="SEARCH"></sa-icon>
						</button>
					</span>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-9 col-lg-8 form-group">
				<label class="label-control ">Diagnóstico</label>
				<input type="text" class="form-control text-uppercase" id="diagnostico" maxlength="200" name="diagnostico" ng-model="vm.data.diagnostico" sa-enter>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 col-sm-8 col-md-6 col-lg-4 form-group">
				<table class="table table-hover table-condensed table-bordered" id="lista_items" ng-show="vm.data.autorizacion.Id != 0">
					<thead>
						<tr class="thead-azul"></tr>
						<tr class="cabecera-tabla">
							<th class="text-center" ng-click="vm.sort('PracticaMedica')">Práctica
								<span class="glyphicon sort-icon" ng-show="sortKey=='PracticaMedica'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
							</th>
							<th class="text-center" ng-click="vm.sort('cantidad')">Cantidad
								<span class="glyphicon sort-icon" ng-show="sortKey=='TipoExcepcion'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
							</th>
							<th class="text-center" width="80px">Acciones</th>
						</tr>
					</thead>
					<tbody ng-repeat="item in vm.data.autorizacion.Items | orderBy:sortKey:reverse|filter:search">
						<tr>
							<td class="row text-center">{{ item.NombrePracticaAMostrar}}</td>
							<td class="row text-center">{{ item.Cantidad}}</td>
							<td class="row text-center" width="80px">
								<button type="button" class="btn btn-white btn-xs" uib-tooltip="Eliminar" uib-tooltip-placement="top" ng-click="vm.formControl.eliminarItem(item)" ng-disabled="!vm.filter.puedeEliminarItem" sa-enter sa-punto-click="vm.formControl.eliminarItem(item)">
									<sa-icon name="DEL"></sa-icon>
								</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		</br>
		<div class="row text-center">
			<div class="btn-group">
				<div class="col-xs-6 col-sm-6 col-md-6 col-lg-5 form-group">
					<button class="btn btn-cancel" ng-click="vm.formControl.cancel()" sa-punto-click="vm.formControl.cancel()" sa-enter>Cancelar</button>
				</div>
				<div class="col-xs-6 col-sm-6 col-md-6 col-lg-5 form-group">
					<button class="btn btn-default " ng-disabled='vm.formControl.validarForm()' ng-click='vm.formControl.ok()' sa-punto-click="vm.formControl.ok()" sa-enter>Guardar</button>
				</div>
			</div>
		</div>
	</form>
</div>