<sa-modal-header title-name="{{vm.title.name}}" title-icon="LIST">

</sa-modal-header>
<sa-modal-body>

    <div class="row">
       <div class="col-8">
		   <h4>Atención, el paciente tiene solicitudes de estudios pendientes, puede seleccionar una Solicitud para solicitar un turno automaticamente</h4>
	   </div>
	</div>
	
	<div class="row">
		<div class="col-12">
			<table class="table table-hover table-condensed table-bordered">
				<thead>
					<tr class="cabecera-tabla">
						<th class="text-center">Fecha - Hora</th>
						<th class="text-center">Recurso Solicitante</th>
						<th class="text-center">Servicio Solicitante</th>
						<th class="text-center">Urgente</th>
						<th class="text-center">Prestaciones</th>
						<th class="text-center">Acciones</th>
						
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="solicitud in vm.itemsDeSolicitudes " ng-class="{'color-aquaorange-turno': solicitud.idSelected === vm.elementoSeleccionado.idSelected}">

						<td class="text-center"  >{{solicitud.FechaDePedido | date:"dd/MM/yyyy HH:mm"}}</td>
						<td class="text-center" ng-bind="solicitud.NombreProfesionalSolicitante" ></td>
						<td class="text-center" ng-bind="solicitud.NombreServicioSolicitante" ></td>
						<td class="text-center" ng-class="solicitud.EstadoColor" >{{solicitud.EsUrgente ? 'Si' : 'No'}}</td>
						<td class="text-center" >
							<p ng-repeat="item in solicitud.ItemsSinTurno ">{{item.NombrePrestacionMedica}}</p>
						</td>
						<td class="text-center">
							<button type="button" class="btn btn-white btn-xs" uib-tooltip="Seleccionar Solicitud" tooltip-placement="top" 
							 ng-click="vm.select(solicitud)">
								<sa-icon name="CHECK"></sa-icon>
							</button>
							<button type="button" class="btn btn-white btn-xs" uib-tooltip="Cancelar Solicitud" tooltip-placement="top" 
							 ng-click="vm.cancelarSolicitud(solicitud)">
								<sa-icon name="DEL"></sa-icon>
							</button>
						</td>
							
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<div class="row" ng-if="vm.solicitudACancelar">
		<h4>Cancelar Solicitud del {{vm.solicitudACancelar.FechaDePedido | date:"dd/MM/yyyy HH:mm"}}</h4>
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

			<div class="col-xs-12 col-sm-6 col-md-5 col-lg-4 form-group">
				<label class="label-control">Motivo Cancelacion Solicitud</label>
				<select name="tipoCancelacion" class="form-control" ng-model="vm.motivoCancelacionTurno" ng-required="true" ng-options="tipoCancelacion as tipoCancelacion.Nombre for tipoCancelacion in vm.motivosCancelacionSolicitud">
					<option value="">-SELECCIONAR-</option>
				</select>
			</div>

			<div class="col-xs-12 col-sm-6 col-md-5 col-lg-4 form-group" ng-if="vm.motivoCancelacionTurno && vm.motivoCancelacionTurno.RequiereObservacion">

				<label class="label-control">Observación para cancelar:</label>
				<textarea class="form-control noresize" ng-model="vm.observacionesParaEliminar"></textarea>
			</div>

			<div class="col-xs-12 col-sm-6 col-md-5 col-lg-2">
				<button type="button" class="btn btn-warning btn-row btn-block" ng-click="vm.confirmarCancelarTurno()">
					Cancelar Solicitud
				</button>
			</div>
		</div>
	</div>


</sa-modal-body>
<sa-modal-footer>
    <input type="submit" id="btnReglas" value="Seleccionar" class="btn btn-success" ng-click="vm.seleccionarSolicitud()">
    <input type="submit" class="btn" ng-click="vm.cancel()" value="Cerrar">
</sa-modal-footer>
</div>
<sa-loading-modal ng-if="vm.loading"></sa-loading-modal>