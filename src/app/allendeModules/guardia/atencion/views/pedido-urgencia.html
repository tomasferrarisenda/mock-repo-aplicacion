<sa-title
	title-name="title.page"
	title-icon="LIST"

	btn-new-click="formControl.newPedido()"
	btn-new-disabled="!formControl.hayCargado || !formControl.medicoCargado"

	btn-reload-click="formControl.limpiar()"
	btn-reload-disabled="formControl.loading"
></sa-title>

<sa-loading ng-if="vm.formControl.loading"></sa-loading>

<div class="cuerpo" >
	<div class="row" ng-hide="formControl.haySucursal || formControl.loading" >
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 colleft ">
			<label for="cmb_tipo_documento" id="nombre_paciente_label">Sucursal </label>
			<select id="select_via"
					class="form-control"
					name="internacion"
					ng-model="formData.sucursal"
					ng-class="validar.error(formSolicitud.ubicacion.$valid)"
					ng-change="formControl.elegirSucursal()"
					ng-options="sucursal.descripcion
								for sucursal in data.sucursales" 
					required 
					>
			</select>
		</div>
	</div>
	<div class="row" ng-hide="!formControl.haySucursal || formControl.loading">
		<div class="col-xs-12 col-sm-8 col-md-6 col-lg-6 colleft">
			<label for="cmb_tipo_documento" id="nombre_paciente_label">Medicamentos: </label>
			<input  type="text" 
					placeholder="Medicamento..." 
					ng-model="formData.material"
					uib-typeahead="material as (material.Nombre +' * '+ material.Presentacion) for material in data.materiales | filter:$viewValue | limitTo:8" 
					class="form-control"
					typeahead-on-select="formControl.tipearMaterial()"
					ng-change="formControl.tipearMaterial()"
					typeahead-select-on-exact="true">
		</div>
		<div class="col-xs-12 col-sm-4 col-md-3 col-lg-2 colleft">
			<label for="cmb_tipo_documento" id="nombre_paciente_label">Medico: </label>
			<input  type="text" 
					placeholder="Medico Solicita..." 
					ng-model="formData.medico"
					uib-typeahead="medico as (medico.Nombre +' / '+ medico.Matricula) for medico in data.medicos | filter:$viewValue | limitTo:8" 
					class="form-control"
					typeahead-on-select="formControl.tipearMedico()"
					ng-change="formControl.tipearMedico()"
					typeahead-select-on-exact="true">
		</div>

		<!-- <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 colleft">
			<div class="btn-group pull-right">
				<button id="asignar_button" class="btn btn-default" type="button"
						ng-disabled="!formControl.hayCargado || !formControl.medicoCargado"
						ng-click="formControl.newPedido()">
						Enviar Pedido
				</button>
				<button class="btn btn-default"
					uib-tooltip="Reiniciar"
					name="restart"
					ng-disabled="formControl.loading"
					ng-click="formControl.limpiar()">
					<sa-icon name="REPEAT"></sa-icon>
				</button>
			</div>
		</div> -->

		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 ">
			<h4>
				Carga Rapida
			</h4>
			<table class="table table-hover" id="table_movimiento">
				<thead>
			 		<tr >
						<th colspan="3" class="text-center"></th>
					</tr>
					<tr class="thead-azul">
					<tr class="cabecera-tabla"> 
						<th class="text-left">Codigo</th>
						<th class="text-left">Nombre</th>
						<th class="text-left">Presentacion</th>
					</tr>
				</thead>
				<tbody ng-hide="formControl.loading">
					<tr ng-dblclick="formControl.tildarMaterial([$index])" ng-repeat="material in data.materialesFavoritos">
						<th class="row text-left">{{ material.NumeroArticulo }}</th>
						<td class="row text-left">{{ material.Nombre}}</td>
						<td class="row text-left">{{ material.Presentacion}}</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
			<h4>
				Pedido
			</h4>
			<table class="table table-hover" id="table_movimiento">
				<thead>
			 		<tr >
						<th colspan="3" class="text-center"></th>
					</tr>
					<tr class="thead-azul">
					<tr class="cabecera-tabla"> 
						<th class="text-left">Codigo</th>
						<th class="text-left">Nombre</th>
						<th class="text-left">Presentacion</th>
						<th class="text-left" style="width: 15%;">Cantidad</th>
					</tr>
				</thead>
				<tbody ng-hide="formControl.loading">
					<tr  ng-repeat="material in data.materialesCargados">
						<th ng-dblclick="formControl.borrarMaterial([$index])" class="row text-left">{{ material.NumeroArticulo }}</th>
						<td ng-dblclick="formControl.borrarMaterial([$index])" class="row text-left">{{ material.Nombre}}</td>
						<td ng-dblclick="formControl.borrarMaterial([$index])" class="row text-left">{{ material.Presentacion}}</td>
						<td class="row text-center">
							<div class="input-group">
					          <span class="input-group-btn">
					              <button type="button" 
										ng-hide=""
										class="btn btn-white btn-xs"
										ng-disabled="material.minimo"
										ng-click="formControl.resta(material)">
										<sa-icon name="MINUS"></sa-icon>
								</button>
					          </span>
					          <input type="text" min="0"
					          			class="form-control input-sm"
										ng-model="material.cantidad"
										ng-disabled="true"
										required>
					          <span class="input-group-btn">
					              <button type="button"
										ng-hide=""
										class="btn btn-white btn-xs"											
										ng-click="formControl.suma(material)">
										<sa-icon name="NEW"></sa-icon>
								</button>
					          </span>
					      </div>		
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="row text-center">
		<label for="cmb_tipo_documento" id="label_indicacion"></label>
		<button class="btn btn-cancelar" ng-click="formControl.volver()">Volver</button>
	</div>
</div>
					