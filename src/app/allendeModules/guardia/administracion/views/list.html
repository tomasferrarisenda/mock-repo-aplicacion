
<sa-title
	title-name="title.page"
	title-icon="LIST"
	btn-reload-click="formControl.reloadPage()"
	btn-reload-disabled="formControl.loading"
></sa-title>
<!-- El loading se muestra si se esta cargando el inicializador -->
<sa-loading ng-if="formControl.loading"></sa-loading>
<!-- El cuerpo se muestra si no se esta cargando el inicializador -->
<!-- O si se produjo algun error inicializando -->
<div class="cuerpo" ng-hide="formControl.loading || formControl.error">
	<div class="row fila">
		<h4>Busqueda</h4>
		<form name="formFilter"  novalidate>
			<div class="col-xs-12 col-sm-2 col-md-2 col-lg-2 colleft form-group " ng-controller="DatePickerController">				
				<label for="txt_fecha_movimiento" id="fecha_movimiento_label" class="control-label">Fecha Desde</label>
				<span class="input-group">
					<div class="form-control"
						ng-bind="formData.fecha_desde | date: 'dd/MM/yyyy'">
					</div>
					<input type="text"  class="form-control" 
					uib-datepicker-popup
					ng-model="formData.fecha_desde"
					is-open="opened1"
					min-date="minDateCommon"
					max-date="formData.fecha_hasta"
					placeholder="Filtrar por fecha..." 
					ng-show="false"
					ng-change="formControl.cambiaFecha()"
					ng-required="">
					<span class="input-group-btn">
						<button type="button" class="btn btn-default"
							id="calendario_button" 
							uib-tooltip="Calendario"
							ng-disabled="" 
							ng-click="open1($event)">
							<sa-icon name="CALENDAR"></sa-icon>
						</button>
					</span>
				</span>
			</div>
			<div class="col-xs-12 col-sm-2 col-md-2 col-lg-2 colleft form-group" ng-controller="DatePickerController">				
				<label for="txt_fecha_movimiento" id="fecha_movimiento_label" class="control-label">Fecha Hasta</label>
				<span class="input-group">
					<div class="form-control"
						ng-bind="formData.fecha_hasta | date: 'dd/MM/yyyy'">
					</div>
					<input type="text"  class="form-control" 
					uib-datepicker-popup
					ng-model="formData.fecha_hasta"
					is-open="opened1"
					min-date="formData.fecha_desde"
					max-date="today"
					placeholder="Filtrar por fecha..." 
					ng-show="false"
					ng-change="formControl.cambiaFecha()"
					ng-required="">
					<span class="input-group-btn">
						<button type="button" class="btn btn-default"
							id="calendario_button" 
							uib-tooltip="Calendario"
							ng-disabled="" 
							ng-click="open1($event)">
							<sa-icon name="CALENDAR"></sa-icon>
						</button>
					</span>
				</span>
			</div>
		</form>
	</div>
	<div class="row fila">
		<h4>Filtrar</h4>
		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-2 colleft form-group">
				<label for="" class="label-control ">Numero documento</label>
				<input type="text" placeholder="Numero documento" class="form-control"
					name="numero_documento"
					ng-model="filter.numero_documento"
					ng-change="paginacion.getPage()">
			</div>
		<form name="formFilter"  novalidate>
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 colleft form-group">
				<label for="" class="label-control ">Nombre del paciente</label>
				<input type="text" placeholder="Nombre del paciente" class="form-control"
					name="nombreCompletoPaciente"
					ng-model="filter.nombreCompletoPaciente"
					ng-change="paginacion.getPage()">
			</div>
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-2 colleft form-group">
				<label for="" class="label-control ">Código de mutual</label>
				<input type="text" placeholder="Código" class="form-control"
					name="codigo_mutual"
					ng-model="filter.codigo_mutual"
					ng-change="paginacion.getPage()">
			</div>
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-3 colleft form-group">
				<label for="" class="label-control ">Nombre de mutual</label>
				<input type="text" placeholder="Nombre de la mutual" class="form-control"
					name="nombreMutual"
					ng-model="filter.nombre_mutual"
					ng-change="paginacion.getPage()">
			</div>
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-1 colleft pull-right">
					<button type="button" class="btn btn-default btn-row btn-block" ng-click="paginacion.cleanFilters()">Limpiar</button>
			</div>
		</form>
	</div>
	<!-- <div class="row form-group">
		<label for="cmb_orderby" class="col-xs-12 col-sm-6 col-md-4 col-lg-3 colleft label-control">Ordenar por:</label>
		<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 colleft">
			<select class="form-control"
				id="cmb_orderby"
				ng-model="order"
				ng-options="order.descripcion for order in listOrderBy track by order.id">
				<option value="">Por fecha de admisión</option>
			</select>
		</div>
	</div> -->
	<div class="row table-responsive">
		<table class="table table-hover">
			<thead>
				<tr></tr>
				<tr class="cabecera-tabla">
					<th class="text-center">Nº paciente</th>
					<th class="">Nombre</th>
					<th class="">Tipo Documento</th>
					<th class="">Numero Documento</th>
					<!-- <th class="">Médico recepciono</th> -->
					<th class="">Mutual</th>
					<!-- <th class="text-center">Nº afiliado</th> -->
					<th class="text-center">Ingreso</th>
					<th class="text-center">Alta</th>
					<th class="text-center">Diagnóstico</th>
					<th class="text-center">Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="prescripcion in filter.prescripciones | orderBy : '-Id'">
					<th class="text-center">{{ prescripcion.Id }}</th>
					<td >{{ prescripcion.NombrePaciente }}</td>
					<td >{{ prescripcion.TipoDocumento }}</td>
					<td >{{ prescripcion.NumeroDocumento }}</td>
					<!-- <td >{{ prescripcion.Detalles[0].UsuarioSolicita.NombreCompleto }}</td> -->
					<td class="">{{ prescripcion.NombreMutual }}</td>
					<!-- <td class="text-center">{{ prescripcion.Paciente.numero_socio_mutual }}</td> -->
					<td class="text-center">{{ prescripcion.FechaCreacion | date:" dd/MM/yyyy HH:mm"}}</td>
					<td class="text-center">{{ prescripcion.FechaAlta | date:" dd/MM/yyyy HH:mm"}}</td>
					<td class="">
						<!-- <span uib-tooltip="{{prescripcion.Diagnostico.nombre}}"> -->
							{{ prescripcion.Diagnostico  }}
							<!-- <span ng-if="(prescripcion.Diagnostico.nombre + '').length > 10">...</span> -->
						<!-- </span> -->
					</td>
					<td class="text-center">
						<button type="button" class="btn btn-white btn-xs"
							uib-tooltip="Ver detalle" tooltip-placement="top"
							ng-click="formControl.verDetalle(prescripcion)">
							<sa-icon name="LIST"></sa-icon>
						</button>
						<button type="button" class="btn btn-white btn-xs"
							uib-tooltip="Facturar" tooltip-placement="top"
							ng-click="formControl.facturar(prescripcion)">
							<sa-icon name="LIST2"></sa-icon>
						</button>
						<!-- <button type="button" class="btn btn-white btn-xs"
							uib-tooltip="Imprimir" tooltip-placement="top"
							ng-click="">
							<span ng-class="icono.PRINT"></span>
						</button>-->
					</td>
				</tr>
			</tbody>
		</table>
	</div><!-- .row>-->
	<div class="row">
		<div class="col-sm-12">
			<div class="text-center">
				<div uib-pagination  boundary-links="true"
					max-size="9"
					items-per-page="paginacion.pageSize"
					total-items="paginacion.totalItems"
					ng-model="paginacion.currentPage"
					ng-change="paginacion.pageChanged()"
					previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;">
				</div>
			</div>
		</div>
	</div><!-- .row>-->
</div>
