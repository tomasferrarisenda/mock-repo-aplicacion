<div ng-hide="vm.formControl.loading">
	<form name="formNewPrestacion" accept-charset="utf-8" novalidate>
		<sa-modal-header title-name="{{vm.title.name}}" title-icon="{{vm.title.icon}}"></sa-modal-header>
		<sa-modal-body>
			<div class="row">
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 " sa-form-input-validate>
					<label>Abreviatura (*)</label>
					<input type="text" class="form-control " name="abreviaturaPrestacion" autocomplete="off" 
					 ng-model="vm.data.prestacion.Abreviatura" required  maxlength="20" >
				</div>
				<div class="col-xs-12 col-sm-12 col-md-8 col-lg-4 " sa-form-input-validate>
					<label>Nombre (*)</label>
					<input type="text" class="form-control" name="nmPrestacion" autocomplete="off" 
					 ng-model="vm.data.prestacion.Nombre " required ng-disabled="vm.data.prestacionId != 0" maxlength="50" >
				</div>
				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-4 " sa-form-input-validate>
					<label>Duración en minutos (*)</label>
					<input type="number" class="form-control" name="pathSistema" autocomplete="off" ng-model="vm.data.prestacion.Duracion " required
					    sa-enter>
				</div>
			</div>
			<div class="row fila">
				<div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 ">
					<label>Preparación</label>
					<textarea rows="1" class="form-control" id="PreparacionPrevia" name="PreparacionPrevia" ng-model="vm.data.prestacion.PreparacionPrevia"
					    maxlength="2000"></textarea>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 ">
					<sa-check-box label="Activo" ng-model="vm.data.prestacion.Activo" color="green" sa-enter></sa-check-box>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-2 ">
					<sa-check-box label="Enviar al llamador" ng-model="vm.data.prestacion.EnviarAlLlamador" color="green" sa-enter></sa-check-box>
				</div>

				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-2 ">
					<sa-check-box label="Es Telemedicina" ng-model="vm.data.prestacion.HabilitadaTelemedicina" color="green" sa-enter></sa-check-box>
				</div>
				<!-- <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 " sa-form-input>
					<label>Cantidad</label>
					<input type="number" ng-model="vm.data.prestacion.Cantidad" min="1">
				</div> -->
			</div>
			<div class="row">
				<h4>Lista De Prefacturables</h4>
				<div class="col-xs-12 col-sm-12 col-md-11 col-lg-11 ">
					<sa-prefacturable-selector model='vm.data.prefacturableBuscado' ng-disabled="false" sa-enter></sa-prefacturable-selector>
				</div>
				<div class="col-xs-12 col-sm-4 col-md-1 col-lg-1 pull-right">
					<button type="button" class="btn btn-success btn-row" uib-tooltip="Agregar Prefacturable Seleccionado" tooltip-placement="top"
					    ng-click="vm.formControl.addPrefacturableToList(vm.data.prefacturableBuscado)" sa-punto-click="vm.formControl.addPrefacturableToList(vm.data.prefacturableBuscado)"
					    sa-enter>
						<sa-icon name="NEW"></sa-icon>
					</button>
				</div>
				<div class="row table-responsive col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-show="vm.data.prefacturablesListParaAgregar.length > 0">
					<div class="col-xs-12">
						<table class="table table-hover">
							<thead>
								<tr></tr>
								<tr class="cabecera-tabla">
									<th class="text-center">Código</th>
									<th class="text-center">Tipo Prefacturable</th>
									<th class="text-center">Prefacturable</th>
									<th class="text-center">Cantidad</th>
									<th class="text-center">Acciones</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="prefacturable in vm.data.prefacturablesListParaAgregar">
									<td class="text-center" ng-bind="prefacturable.Codigo"></td>
									<td class="text-center" ng-bind="prefacturable.NombreTipo"></td>
									<td class="text-center" ng-bind="prefacturable.Nombre"></td>
									<td class="text-center" sa-form-input><input type="number" ng-model="prefacturable.Cantidad" min="1" style="text-align: right;"></td>
									<td class="text-center">
										<button type="button" class="btn btn-white btn-xs" uib-tooltip="Eliminar Prefacturable" tooltip-placement="top" ng-click="vm.formControl.eliminarPrefacturableDeLista($index)"
										    sa-punto-click="vm.formControl.eliminarPrefacturableDeLista($index)" sa-enter>
											<sa-icon name="DEL"></sa-icon>
										</button>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 " ng-show="vm.data.prefacturablesListParaAgregar.length == 0">
					<label>No hay prefacturables agregados</label>
				</div>
			</div>
		</sa-modal-body>
		<sa-modal-footer>
			<input type="submit" class="btn" sa-punto-click="vm.formControl.cancel()" ng-click="vm.formControl.cancel()" sa-enter sa-punto-click="vm.formControl.cancel()"
			    value="Cancelar">
			<input type="submit" id="btnAgregarEditar" value="Guardar" class="btn btn-default" sa-enter sa-punto-click="vm.formControl.ok(formNewPrestacion.$valid)"
			    ng-click="vm.formControl.ok(formNewPrestacion.$valid)">
		</sa-modal-footer>
	</form>
</div>
<sa-loading ng-if="vm.formControl.loading"></sa-loading>