<sa-title
	title-name="vm.title.page"
	title-icon="LIST"

	btn-reload-click="vm.formControl.reloadPage()"
	btn-reload-disabled="vm.formControl.loading"
></sa-title>
<sa-loading ng-if="vm.formControl.loading"></sa-loading>
<div class="cuerpo" ng-hide="vm.formControl.loading || vm.formControl.error">
	<div class="row fila">
		<h4>
			Búsqueda avanzada
			<button class="btn btn-white"
				uib-tooltip="Ocultar filtros"
				ng-if="vm.formControl.showFilters"
				ng-click="vm.formControl.showFilters=false">
					<sa-icon name="DOWN"></sa-icon>
			</button>
			<button class="btn btn-white"
				uib-tooltip="Mostrar filtros"
				ng-if="!vm.formControl.showFilters"
				ng-click="vm.formControl.showFilters=true">
					<sa-icon name="NEXT"></sa-icon>
			</button>
		</h4>
		<form name="formFilter" accept-charset="utf-8" novalidate ng-if="vm.formControl.showFilters">
			<div class="col-xs-12" ng-show="false">
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group">
					<label for="" >Número de internado</label>
					<input type="number" placeholder="Número de internado" class="form-control"
						name="numeroInternado"
						ng-model="vm.filter.numeroInternado" >
				</div>
			</div>
			<div class="col-xs-12" >
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group">
						<sa-check-box
							label="Filtro de ingreso"
							ng-model="vm.filter.incluirIngreso"
							ng-change="vm.quitarIngreso()">
						</sa-check-box>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group" ng-if="vm.filter.incluirIngreso">
						<label for="txt_fecha_ingreso_desde">Fecha de Ingreso Desde (*)</label>
						<sa-date-picker
							name="fechaIngresoDesde"
							model="vm.filter.fechaIngresoDesde"
							max-date="vm.today" 
							required="true">
						</sa-date-picker>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group" ng-if="vm.filter.incluirIngreso">
						<label for="txt_fecha_ingreso_hasta">Fecha de Ingreso Hasta (*)</label>
						<sa-date-picker
							name="fechaIngresoHasta"
							model="vm.filter.fechaIngresoHasta"
							min-date="vm.filter.fechaIngresoDesde"
							max-date="vm.today"
							disabled="!vm.filter.fechaIngresoDesde"
							required="true">
						</sa-date-picker>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group">
						<sa-check-box
							label="Incluir filtros para altas"
							ng-model="vm.filter.incluirAltas"
							ng-change="vm.quitarAltas()">
						</sa-check-box>
					</div>
					<div ng-if="vm.filter.incluirAltas">
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group" >
							<label for="txt_fecha_egreso_desde">Fecha de Egreso Desde (*)</label>
							<sa-date-picker
								name="fechaEgresoDesde"
								model="vm.filter.fechaEgresoDesde"
								max-date="vm.today" 
								required="true">
							</sa-date-picker>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group" >
							<label for="txt_fecha_egreso_hasta">Fecha de Egreso Hasta (*)</label>
							<sa-date-picker
								name="fechaEgresoHasta"
								model="vm.filter.fechaEgresoHasta"
								max-date="vm.today"
								min-date="vm.filter.fechaEgresoDesde"
								disabled="!vm.filter.fechaEgresoDesde"
								required="true">
							</sa-date-picker>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12">
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2">
						<div sa-form-input>
							<label >Sucursal &nbsp;</label>
							<button class="btn btn-info btn-sm"
								ng-click="vm.sucursal.open()" >
								<sa-icon name="NEW"></sa-icon>
							</button>
							<div >
								<ul>
									<li ng-repeat="sucursal in vm.filter.sucursales">
										<span ng-bind="sucursal.descripcion"></span>
										<button class="btn btn-xs btn-white"
											ng-click="vm.sucursal.delete()">
												<sa-icon name="DEL"></sa-icon>
										</button>
									</li>
									<li ng-if="!vm.filter.sucursales.length">Todas</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2">
						<div sa-form-input>
							<label for="" >Mutual &nbsp;</label>
							<button class="btn btn-info btn-sm"
								ng-click="vm.mutual.open()" >
								<sa-icon name="NEW"></sa-icon>
							</button>
							<div>
								<ul>
									<li ng-repeat="mutual in vm.filter.mutuales">
										<span ng-bind="mutual.codigo_mutual"></span> -  
										<span ng-bind="mutual.nombre_mutual"></span>
										<button class="btn btn-xs btn-white"
											ng-click="vm.mutual.delete()">
												<sa-icon name="DEL"></sa-icon>
										</button>
									</li>
									<li ng-if="!vm.filter.mutuales.length">Todas</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2 form-group" ng-if="vm.filter.incluirAltas">
						<label >Tipo de Alta &nbsp;</label>
						<button class="btn btn-info btn-xs	"
							ng-click="vm.tipoAlta.open()" >
							<sa-icon name="NEW"></sa-icon>
						</button>
						<div>
							<ul>
								<li ng-repeat="tipoAlta in vm.filter.tiposAlta">
									<span ng-bind="tipoAlta.nombre_tipo_alta_internacion"></span>
									<button class="btn btn-xs btn-white"
										ng-click="vm.tipoAlta.delete()">
										<sa-icon name="DEL"></sa-icon>
									</button>
								</li>
								<li ng-if="!vm.filter.tiposAlta.length">Todas</li>
							</ul>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-2"  ng-if="vm.filter.incluirAltas" uib-tooltip="Internaciones con autorizaciones agregadas despues del alta.">
						<div sa-form-input>
							<sa-check-box
								label="Solo autorizaciones agregadas"
								ng-model="vm.filter.soloAutorizacionesAgregadas">
							</sa-check-box>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12">
				<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2 pull-right">
					<button class="btn-row btn-block"
						sa-btn-search
						ng-disabled="!formFilter.$valid"
						ng-click="vm.internacion.search()">Buscar</button>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2 pull-right">
					<button class="btn-row btn-block"
						sa-btn-clean
						ng-click="vm.cleanFilters()">Limpiar</button>
				</div>
			</div>
		</form>
	</div>
	<div ng-if="!vm.data.internaciones.length" class="row text-center">
		<span >No hay registros</span>
	</div>

	<div ng-show="vm.formControl.searchOk && vm.data.internaciones.length" class="row">
		
		<div class="col-xs-12">
			<sa-grid-reporte-internacion-historico
				btn-edit-if="true"
				btn-view-if="true"
				data="vm.data.internaciones">
			</sa-grid-reporte-internacion-historico>
		</div>
	</div>
</div>