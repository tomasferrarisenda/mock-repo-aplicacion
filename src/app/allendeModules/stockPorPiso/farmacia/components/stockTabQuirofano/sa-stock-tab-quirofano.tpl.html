<div class="row fila">
	<!-- <h4>Busqueda</h4> -->

	<div class="col-xs-12 col-sm-6 col-md-5 col-lg-4">
		
		<label for="cmb_grupo" id="label_grupo">Grupo</label>
		<div class="input-group">
			<input 	name="producto" 
				id="producto" type="text" 
				placeholder="Nombre del grupo..." 
				ng-model="vm.grupo"
				uib-typeahead="grupo as grupo.Nombre for grupo in vm.grupos | filter:$viewValue | limitTo:200" 
				class="form-control"
				typeahead-on-select="vm.seleccionarGrupo()"
				ng-change="vm.seleccionarGrupo()"
				typeahead-select-on-exact="true">

			<span class="input-group-btn">
				<button id="cargarGrupo" type="button" class="btn btn-default" ng-disabled="!vm.grupoCargado || (!vm.esReposicion && !vm.esExterno && !vm.internadoCargado) "
					uib-tooltip="Cargar" uib-tooltip-placement="top" ng-click="vm.cargarGrupo()">
					<sa-icon name="NEW"></sa-icon>
				</button>
				<button id="printGrupo" type="button" class="btn btn-default" ng-disabled="!vm.grupoCargado"
					uib-tooltip="Imprimir" uib-tooltip-placement="top" ng-click="vm.printGrupo()">
					<sa-icon name="PRINT"></sa-icon>
				</button>
				
			</span>
		</div>
	</div>
</div>

<div class="row fila">
	<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 ">
		<label for="internado_select">Internados</label>
		<input 	type="text" 
			placeholder="Numero Internado | Nombre Paciente" 
			ng-model="vm.internado"
			ng-disabled="vm.esExterno || vm.esReposicion"
			uib-typeahead="internado as (internado.numero_internado +' | '+ internado.nombre_paciente) for internado in vm.internados | filter:$viewValue | limitTo:8"
			class="form-control"
			typeahead-on-select="vm.seleccionarInternado()"
			ng-change="vm.seleccionarInternado()"
			typeahead-select-on-exact="true">

	</div>
	<div class="col-xs-12 col-sm-3 col-md-3 col-lg-2">
		<sa-check-box label="Reposicion"
					ng-disabled="vm.esExterno"
					ng-model="vm.esReposicion"
					ng-change="vm.seleccionarReposicion()">
		</sa-check-box>
	</div>  
	<div class="col-xs-12 col-sm-3 col-md-3 col-lg-2">
		<sa-check-box label="Externo"
					ng-model="vm.esExterno"
					ng-change="vm.seleccionarExterno()"
					ng-disabled="vm.esReposicion">
		</sa-check-box>
	</div>
	<div class="col-xs-12 col-sm-6 col-md-2 col-lg-4">
		<span class="btn-group btn-group pull-right">
			<button id="limpiarCarga_button" type="button" 
					class="btn btn-default"
					uib-tooltip="Limpiar Cargas" 
					uib-tooltip-placement="top"
					ng-click="vm.limpiar()">
				<sa-icon name="REPEAT"></sa-icon>
			</button>
			<button id="print" type="button" 
					class="btn btn-default "
					uib-tooltip="Cargar" 
					ng-disabled="(!vm.esReposicion && !vm.esExterno && !vm.internadoCargado) || !vm.hayMateriales"
					uib-tooltip-placement="top"
					ng-click="vm.cargar()">
					Entregar
			</button>
			<!-- <button id="print" type="button" 
					class="btn btn-default btn-row-right"
					uib-tooltip="Imprimir" 
					uib-tooltip-placement="top"
					ng-click="print()">
				<sa-icon name="PRINT"></sa-icon>
			</button> -->
		</span>
	</div>
</div>

<div class="row">
	<div class= "col-xs-12 col-sm-6 col-md-6 col-lg-6  btn-row-right scroll-dropdown" >
		<div class="input-group" ng-hide="!vm.cargarProducto">
			<input 	name="producto" 
					id="producto" type="text" 
					placeholder="Nuevo producto..." 
					ng-model="vm.producto"
					uib-typeahead="producto as (producto.Nombre +' * '+ producto.Presentacion) for producto in vm.materiales | filter:$viewValue | limitTo:200" 
					class="form-control no-valid"
					typeahead-on-select="vm.seleccionarProducto(producto)"
					ng-change=""
					typeahead-select-on-exact="true">
			<span class="input-group-btn">
				<button id="estado_button" class="btn btn-default " type="button"
						ng-click="vm.nuevoProducto()"
						uib-tooltip="Agregar" 
						uib-tooltip-placement="top">
						<sa-icon name="NEW"></sa-icon>
				</button>
			</span>
		</div>

		<button id="estado_button" class="btn btn-default pull-right" type="button"
			ng-click="vm.nuevoProducto()"
			ng-if="!vm.cargarProducto"
			uib-tooltip="Agregar" 
			uib-tooltip-placement="top">
			<sa-icon name="NEW"></sa-icon>
		</button>
	</div>
</div>

<div class="row">
	<div class="col-xs-12">
		<table class="table table-hover" >
			<thead>
				<tr >
					<th colspan="4" class="text-center"></th>
				</tr>
				<tr class="cabecera-tabla">
					<th class="text-left">Codigo</th>
					<th class="text-left">Nombre</th>
					<th class="text-left">Presentacion</th>
					<!-- <th class="text-left">Stock actual</th> -->
					<th class="text-center" style="width: 10%;">Asignar</th>
					<th class="text-left" style="width: 5%;"></th>
					<th class="text-left">Codigo</th>
					<th class="text-left">Nombre</th>
					<th class="text-left">Presentacion</th>
					<!-- <th class="text-left">Stock actual</th> -->
					<th class="text-center" style="width: 10%;">Asignar</th>
				</tr>
			</thead>
			<tbody ng-hide="formControl.loading || formControl.error">
				<tr ng-repeat="detalle in vm.materialesCargados" ng-if="$index % 2 == 0">
					<td	class="row text-left">{{ vm.materialesCargados[$index].Material.NumeroArticulo }}	</td>
					<td	class="row text-left">{{ vm.materialesCargados[$index].Material.Nombre }}	</td>
					<td class="row text-left">{{ vm.materialesCargados[$index].Material.Presentacion }}</td>
					<!-- <td class="row text-left">{{ vm.materialesCargados[$index].Stock }}</td> -->
					<td class="row text-center">
						<div class="input-group">
							<span class="input-group-btn">
								<button type="button" 
									ng-hide=""
									class="btn btn-white btn-xs"
									ng-disabled="vm.materialesCargados[$index].minimo"
									ng-click="vm.resta(vm.materialesCargados[$index])">
									<sa-icon name="MINUS"></sa-icon>
							</button>
							</span>
							<input type="text" min="0"
										class="form-control input-sm"
									ng-model="vm.materialesCargados[$index].Cantidad"
									ng-disabled="true"
									required>
							<span class="input-group-btn">
								<button type="button"
									ng-hide=""
									class="btn btn-white btn-xs"		
									ng-disabled="vm.materialesCargados[$index].maximo"									
									ng-click="vm.suma(vm.materialesCargados[$index])">
									<sa-icon name="NEW"></sa-icon>
							</button>
							</span>
						</div>		
					</td>
					<td class="row text-left"></td>
					<td	class="row text-left">{{ vm.materialesCargados[$index+1].Material.NumeroArticulo }}	</td>
					<td	class="row text-left">{{ vm.materialesCargados[$index+1].Material.Nombre }}	</td>
					<td class="row text-left">{{ vm.materialesCargados[$index+1].Material.Presentacion }}</td>
					<!-- <td class="row text-left">{{ vm.materialesCargados[$index+1].stock_actual }}</td> -->
					<td class="row text-center">
						<div class="input-group">
							<span class="input-group-btn">
								<button type="button" 
									ng-hide=""
									class="btn btn-white btn-xs"
									ng-disabled="vm.materialesCargados[$index+1].minimo"
									ng-click="resta(vm.materialesCargados[$index+1])">
									<sa-icon name="MINUS"></sa-icon>
							</button>
							</span>
							<input type="text" min="0"
										class="form-control input-sm"
									ng-model="vm.materialesCargados[$index+1].Cantidad"
									ng-disabled="true"
									required>
							<span class="input-group-btn">
								<button type="button"
									ng-hide=""
									class="btn btn-white btn-xs"
									ng-disabled="vm.materialesCargados[$index+1].maximo"
									ng-click="suma(vm.materialesCargados[$index+1])">
									<sa-icon name="NEW"></sa-icon>
								</button>
							</span>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
<sa-loading ng-if="formControl.loading"></sa-loading>