<div class="row">
	<h4>Busqueda</h4>
	<form name="formFilter" novalidate>
		<div class="col-xs-12 col-sm-4 col-md-3 col-lg-2">
			<label for="cmb_tipo_documento" id="piso_label">Sucursal</label>
			<select id="piso_select" class="form-control"
				name="Sucursal"
				ng-model="formData.sucursal"
				ng-change="cambiaSucursal()"
				ng-options="sucursal.Nombre 
							for sucursal in data.sucursales 
							track by sucursal.Id"
				required >
			</select>
		</div>
		<div class="col-xs-12 col-sm-3 col-md-2 col-lg-2">
			<label for="txt_fecha_movimiento" id="fecha_movimiento_label" class="control-label">Fecha Desde</label>
			<sa-date-picker
				model="formData.fecha_desde"
				max-date="today"
				change="getMovimientos()"
				required="true">
			</sa-date-picker>
		</div>
		<!-- <div class="col-xs-12 col-sm-3 col-md-2 col-lg-2" ng-controller="DatePickerController">
			<label for="txt_fecha_movimiento" id="fecha_movimiento_label" class="control-label">Fecha Desde</label>
			<span class="input-group">
				<div class="form-control"
					ng-bind="formData.fecha_desde | date: 'dd/MM/yyyy'">
				</div>
				<input type="text"  class="form-control" 
					uib-datepicker-popup
					ng-model="formData.fecha_desde"
					is-open="opened1"
					min-date="minDateCommon"
					max-date="today"
					placeholder="Filtrar por fecha..." 
					ng-show="false"
					ng-change="getMovimientos()"
					ng-required="">
				<span class="input-group-btn">
					<button type="button" class="btn btn-default"
						id="calendario_button" 
						uib-tooltip="Calendario"
						ng-disabled="" 
						ng-click="open1($event)">
						<sa-icon name="CALENDAR"></sa-icon>
					</button>
				</span>
			</span>
		</div> -->
		<div class="col-xs-12 col-sm-3 col-md-2 col-lg-2">
			<label for="txt_fecha_movimiento" id="fecha_movimiento_label2" class="control-label">Fecha Hasta</label>
			<sa-date-picker
				model="formData.fecha_hasta"
				min-date="formData.fecha_desde"
				max-date="today"
				change="getMovimientos()"
				required="true">
			</sa-date-picker>
			<!-- <span class="input-group">
				<div class="form-control"
					ng-bind="formData.fecha_hasta | date: 'dd/MM/yyyy'">
				</div>
				<input type="text"  class="form-control" 
					uib-datepicker-popup
					ng-model="formData.fecha_hasta"
					is-open="opened1"
					min-date="formData.fecha_desde"
					max-date="today"
					placeholder="Filtrar por fecha..." 
					ng-show="false"
					ng-change="getMovimientos()"
					ng-required="">
				<span class="input-group-btn">
					<button type="button" class="btn btn-default"
						id="calendario_button2" 
						uib-tooltip="Calendario"
						ng-disabled="" 
						ng-click="open1($event)">
						<sa-icon name="CALENDAR"></sa-icon>
					</button>
				</span>
			</span> -->
		</div>
		<!-- <div class="col-xs-12 col-sm-3 col-md-2 col-lg-2" ng-controller="DatePickerController">
			<label for="txt_fecha_movimiento" id="fecha_movimiento_label2" class="control-label">Fecha Hasta</label>
			<span class="input-group">
				<div class="form-control"
					ng-bind="formData.fecha_hasta | date: 'dd/MM/yyyy'">
				</div>
				<input type="text"  class="form-control" 
					uib-datepicker-popup
					ng-model="formData.fecha_hasta"
					is-open="opened1"
					min-date="formData.fecha_desde"
					max-date="today"
					placeholder="Filtrar por fecha..." 
					ng-show="false"
					ng-change="getMovimientos()"
					ng-required="">
				<span class="input-group-btn">
					<button type="button" class="btn btn-default"
						id="calendario_button2" 
						uib-tooltip="Calendario"
						ng-disabled="" 
						ng-click="open1($event)">
						<sa-icon name="CALENDAR"></sa-icon>
					</button>
				</span>
			</span>
		</div> -->
	</form>
</div>
<div class="row">
	<h4>Filtrar</h4>
	<div class="col-xs-12">
		<div class="row">
			<div class="col-xs-12 col-sm-3 col-md-2 col-lg-1 group ">
				<label for="cmb_tipo_documento" id="buscar_movimiento_label">Movimiento: </label>
				<input id="buscar_movimiento" name="searchText" placeholder="Codigo..." class="form-control" ng-model="formData.search.id_movimiento">
			</div>
			<div class="col-xs-12 col-sm-3 col-md-2 col-lg-2 group ">
				<label for="cmb_tipo_documento" id="usuario_label">Usuario </label>
				<select id="usuario_select" class="form-control"
					name="usuario"
					ng-model="filter.usuario"
					ng-class="validar.error(formSolicitud.usuario.$valid)"
					ng-change="pageChanged()"
					ng-disabled="constante.disabled || formControl.externo"
					ng-options="usuario.Nombre for usuario in data.usuarios track by usuario.Id" 
					required >
					<option value="">--SELECCIONAR--</option>
				</select>
			</div>
			<div class="form-group">
				<sa-ubicacion-piso
					sucursal="sucursal"
					changed="ubicacionChanged(ubicacion)"
					limpiar="formControl.limpiar">
				</sa-ubicacion-piso>
			</div>
			<div class="col-xs-2 col-sm-6 col-md-6 col-lg-3">
				<button id="limpiarFiltros_button" type="button" 
					class="btn btn-default btn-row"
					uib-tooltip="Limpiar Filtros" 
					uib-tooltip-placement="top"
					ng-click="filter.clean()">
					<sa-icon name="REPEAT"></sa-icon>
				</button>
			</div>
		</div>
	</div>
	<div class="col-xs-12">
		<div class="row">
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 ">
				<label for="cmb_tipo_documento" id="descartable_label">Producto </label>
				<input name="descartable" 
					id="descartable" type="text" 
					placeholder="Filtrar por producto..." 
					ng-model="filter.material"
					uib-typeahead="material as material.nombre for material in data.materiales | filter:$viewValue | limitTo:8" 
					class="form-control"
					typeahead-on-select="filterDescartable()"
					ng-change="filterDescartable()"
					typeahead-select-on-exact="true">
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-xs-12">
		<table class="table table-hover" id="table_movimiento" ng-hide="formControl.loading">
			<thead>
				<tr class="cabecera-tabla"> 
					<th class="text-left">Codigo</th>
					<th class="text-left">Usuario</th>
					<th class="text-left">Destino</th>
					<th class="text-left">Fecha y Hora</th>
					<th class="text-left">Tipo de Movimiento</th>
					<th class="text-center">Detalle Movimiento</th>
				</tr>
			</thead>
			<tbody ng-hide="formControl.loading || formControl.error">
				<tr ng-repeat="movimiento in filter.movimientos | filter:formData.search:strict">
					<th class="row text-left">{{ movimiento.id_movimiento }}</th>
					<td class="row text-left">{{ movimiento.Usuario.Nombre}}</td>
					<td class="row text-left">{{ movimiento.UbicacionHasta.nombre}}</td>
					<td class="row text-left">{{ movimiento.fecha_alta | date:"yyyy/MM/dd HH:mm"}}</td>
					<td class="row text-left">{{ movimiento.TipoMovimiento.nombre_tipo_movimiento}}</td>
					<td class="text-center">
						<!-- Mostrar detalle movimiento -->
						<button id="detalleMovimiento_button" 
							type="button" 
							class="btn btn-white btn-xs"
							uib-tooltip="Ver Detalle" 
							uib-tooltip-placement="top"
							ng-click="verDetalle(movimiento)">
							<sa-icon name="LIST3"></sa-icon>
						</button>
						<button type="button" class="btn btn-white btn-xs"
							id="printMovimiento_button" 
							uib-tooltip="Imprimir Remito" uib-tooltip-placement="top"
							ng-click="printMovimiento(movimiento)">
							<sa-icon name="PRINT"></sa-icon>
						</button>
						<button type="button" class="btn btn-white btn-xs"
							id="printInternado_button" 
							uib-tooltip="Imprimir Internado" uib-tooltip-placement="top"
							ng-click="printInternado(movimiento)">
							<sa-icon name="PRINT"></sa-icon>
						</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
<div class="row" ng-hide="formControl.loading">
	<div class="col-sm-12">
		<div class="text-center">
			<div uib-pagination  boundary-links="true"
			id="paginator"
			max-size="9"
			items-per-page="paginacion.pageSize"
			total-items="paginacion.totalItems"
			ng-model="paginacion.currentPage"
			ng-change="pageChanged()"
			previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;">
			</div>
		</div>
	</div>
</div><!-- .row>-->
<sa-loading ng-if="formControl.loading"></sa-loading>
